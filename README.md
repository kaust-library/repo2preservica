# Repo to Preservica

Script to ingest files from the institutional repository into Presevica.

Structural objects define the organisation of the data. In a library context they may be referred to as collections, in an archival context they may be Fonds, Sub-Fonds, Series etc and in a records management context they could be simply a hierarchy of folders or directories.

These structural objects may contain other structural objects in the same way as a computer filesystem may contain folders within folders.

Within the structural objects comes the information objects. These objects which are sometimes referred to as the digital assets are what PREMIS defines as an Intellectual Entity. Information objects are considered a single intellectual unit for purposes of management and description: for example, a book, document, map, photograph or database etc.

request an Asset (Information Object) by its unique reference and display some of its attributes. Information objects are considered a single intellectual unit for purposes of management and description: for example, a book, document, map, photograph or database etc.

## Configuration

Use the file `.env_example` to customize your version of the `.env` file with the credentials for Preservica.

## Running the Script

The script will try to import all folders in `data_folder` defined in the `ingest.cfg` file (`config` folder). It will say how many folders it was found, and the log messages will inform of the progress, like uploading or skipping because the folder already exists in Preservica.

```
(venv) PS C:\Users\garcm0b\Work\repo2preservica> python .\src\repo2preservica.py .\config\ingest.cfg
(venv) PS C:\Users\garcm0b\Work\repo2preservica> python .\src\repo2preservica.py .\config\ingest.cfg
INFO:root:Entity: 'pyPreservica version: 1.6.1  (Preservica 6.5 Compatible) Connected to: eu.preservica.com Preservica version: 6.6.1 as eamon.smallwood@kaust.edu.sa in tenancy KAUST'
INFO:root:Files will be ingest into 'REPOSITORY_ETD_TEST'.
INFO:root:Start of bagging process.
INFO:root:We found 16 folders to scan
INFO:root:Creating Preservica folder '10754_136193'
INFO:root:Creating metadata file for '10754_136193'
INFO:root:Creating zip with folder '10754_136193' content
INFO:root:Removing metadata file '10754_136193\10754_136193.metadata'██████████████████████████████████████████| (100.00%) (0.61 Mb/s)
INFO:root:Preservica folder '10754_136194' already exists
INFO:root:Skipping folder
INFO:root:Creating Preservica folder '10754_136195'
(...)
```

After the ingestion, the next step is to verify if the files are the same. The test is to compare the checksum from the Repository with the one generated by Preservica during the ingestion:

```
Bag name: '10754_136193'
INFO:root:Finished reading checksum from Preservica
INFO:root:10754_136193.json is the same
INFO:root:10754_136193.xml is the same
INFO:root:147584-295966.json is the same
INFO:root:147584-295967.json is the same
INFO:root:147584-295967.pdf is the same
INFO:root:147584-295968.json is the same
INFO:root:147584-295968.pdf is the same
INFO:root:sha256.txt is the same
INFO:root:data/147584-295966.metadata is the same
INFO:root:data/147584-295966.pdf is the same
```
